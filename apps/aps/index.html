<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Arriyadh region plants database</title>
	
	<link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='800px' height='800px' version='1.1' viewBox='0 0 32 32' xml:space='preserve' xmlns='http://www.w3.org/2000/svg'%3E%3Cstyle type='text/css'%3E .avocado_een%7Bfill:%23231F20;%7D .avocado_negen%7Bfill:%236F9B45;%7D .avocado_tien%7Bfill:%23C3CC6A;%7D .avocado_drie%7Bfill:%23716558;%7D .avocado_vier%7Bfill:%23AF9480;%7D .st0%7Bfill:%23EAD13F;%7D .st1%7Bfill:%23CC4121;%7D .st2%7Bfill:%23FFFAEE;%7D .st3%7Bfill:%23E0A838;%7D .st4%7Bfill:%23D1712A;%7D .st5%7Bfill:%23A3AEB5;%7D .st6%7Bfill:%23788287;%7D .st7%7Bfill:%23248EBC;%7D .st8%7Bfill:%238D3E93;%7D .st9%7Bfill:%233D3935;%7D .st10%7Bfill:%23D36781;%7D .st11%7Bfill:%23E598A3;%7D .st12%7Bfill:%23DBD2C1;%7D .st13%7Bfill:%23231F20;%7D%0A%3C/style%3E%3Cpath class='avocado_tien' d='m26.241 9.442c-0.061-0.167-0.796-0.56-3.433-0.371l-0.712 0.052 0.195-0.687c0.887-3.12 0.602-4.102 0.433-4.2-0.19-0.11-1.291 0.188-3.803 2.874l-0.665 0.711-0.19-0.954c-0.803-4.015-1.755-5.367-2.066-5.367s-1.263 1.352-2.066 5.368l-0.19 0.954-0.665-0.711c-2.517-2.691-3.617-2.982-3.803-2.874-0.169 0.098-0.454 1.08 0.433 4.2l0.195 0.687-0.713-0.052c-2.634-0.189-3.371 0.203-3.432 0.37-0.285 0.784 3.815 3.739 6.668 5.058h7.146c2.853-1.318 6.953-4.274 6.668-5.058z'/%3E%3Cpath class='avocado_negen' d='m26.241 9.442c-0.016-0.043-0.078-0.1-0.202-0.159-2.544 1.974-6.089 3.217-10.039 3.217s-7.495-1.243-10.039-3.217c-0.124 0.059-0.186 0.117-0.202 0.159-0.285 0.784 3.815 3.739 6.668 5.058h7.146c2.853-1.318 6.953-4.274 6.668-5.058z'/%3E%3Cpolygon class='avocado_vier' points='23.5 27.5 22.434 27.5 23.559 18.5 24.5 18.5 24.5 14.5 7.5 14.5 7.5 18.5 8.441 18.5 9.566 27.5 8.5 27.5 8.5 30.5 23.5 30.5'/%3E%3Cpolygon class='avocado_drie' points='23.253 21 8.762 21 8.441 18.5 23.559 18.5'/%3E%3Cpath class='avocado_een' d='m26.711 9.272c-0.201-0.553-1.263-0.75-2.616-0.75-0.419 0-0.865 0.019-1.323 0.052 0.615-2.161 0.96-4.331 0.202-4.769-0.097-0.056-0.209-0.082-0.334-0.082-0.939 0-2.619 1.479-4.084 3.048-0.527-2.637-1.473-5.771-2.556-5.771s-2.029 3.134-2.557 5.77c-1.466-1.568-3.145-3.048-4.084-3.048-0.125 0-0.237 0.026-0.334 0.082-0.758 0.438-0.412 2.608 0.203 4.769-0.458-0.033-0.905-0.052-1.323-0.052-1.353 0-2.415 0.197-2.616 0.75-0.403 1.107 2.732 3.33 5.139 4.728h-3.428v5h1l1 8h-1v4h16v-4h-1l1-8h1v-5h-3.428c2.407-1.397 5.542-3.62 5.139-4.727zm-3.711 20.728h-14v-2h14v2zm-1.008-3h-11.984l-1-8h13.984l-1 8zm2.008-9h-16v-3h16v3zm-4.502-4h-6.995c-2.312-1.025-5.465-3.389-6.132-4.33 0.243-0.068 0.706-0.148 1.534-0.148 0.377 0 0.798 0.017 1.251 0.049l1.424 0.103-0.391-1.374c-0.597-2.1-0.625-3.086-0.585-3.497 0.462 0.213 1.471 0.898 3.108 2.65l1.329 1.422 0.382-1.909c0.553-2.761 1.194-4.296 1.577-4.823 0.383 0.527 1.024 2.062 1.576 4.822l0.382 1.909 1.329-1.422c1.639-1.754 2.648-2.438 3.108-2.651 0.041 0.41 0.013 1.396-0.585 3.498l-0.39 1.374 1.424-0.103c0.454-0.033 0.875-0.049 1.251-0.049 0.828 0 1.29 0.08 1.534 0.148-0.666 0.942-3.819 3.306-6.131 4.331z'/%3E%3C/svg%3E%0A" />
	
	<style>
	body {
		overflow: hidden;
		height: 100%;
	}
	
	body, 
	button, 
	input {
		font-family: monospace;
	}
	
	button,
	input {
    font-size: 1.1em;
	}
	
	#searchBar {
		display: flex;
		align-items: center;
		flex-direction: column;
		background: brown;
    color: white;
	}
	
	#search {
		width: 100%;
		display: flex;
	}
	
	button {
		text-transform: uppercase;
		font-weight: bold;
		/*padding: 5px 10px;*/
		cursor: pointer;
	}
	
	#toggle {
		line-height: 25px;
    font-size: 1.1em;
		cursor: pointer;
	}
	.OFF#toggle::before { content: "vVv  SHOW FILTERS  vVv"; }
	.ON#toggle::before { content: "--- HIDE FILTERS ---"; }
	
	#filters {
		display: flex;
    gap: 100px;
    margin: 15px;
    line-height: 1;
	}
	.Hide#filters { display: none; }
	
	#filterType {
		display: flex;
    flex-direction: row;
    column-gap: 20px;
    flex-wrap: wrap;
	}
  
  section > label {
    margin-top: -10px;
    position: absolute;
  }
	
	/* Customize the label (the container) */
	.Checkbox {
		display: block;
		position: relative;
		padding-left: 35px;
		margin-bottom: 12px;
		cursor: pointer;
		font-size: 22px;
		text-transform: uppercase;
		-webkit-user-select: none;
		-moz-user-select: none;
		-ms-user-select: none;
		user-select: none;
	}

	/* Hide the browser's default checkbox */
	.Checkbox input {
		position: absolute;
		opacity: 0;
		cursor: pointer;
		height: 0;
		width: 0;
	}

	/* Create a custom checkbox */
	.Checkmark {
		position: absolute;
		top: 0;
		left: 0;
		height: 25px;
		width: 25px;
		background-color: #eee;
	}

	/* On mouse-over, add a grey background color */
	.Checkbox:hover input ~ .Checkmark {
		background-color: #ccc;
	}

	/* When the checkbox is checked, add a blue background */
	.Checkbox input:checked ~ .Checkmark {
		background-color: #2196F3;
	}

	/* Create the checkmark/indicator (hidden when not checked) */
	.Checkmark:after {
		content: "";
		position: absolute;
		display: none;
	}

	/* Show the checkmark when checked */
	.Checkbox input:checked ~ .Checkmark:after {
		display: block;
	}

	/* Style the checkmark/indicator */
	.Checkbox .Checkmark:after {
		left: 9px;
		top: 5px;
		width: 5px;
		height: 10px;
		border: solid white;
		border-width: 0 3px 3px 0;
		-webkit-transform: rotate(45deg);
		-ms-transform: rotate(45deg);
		transform: rotate(45deg);
	}
	
	#content {
		display: flex;
		height: 90vh;
		overflow: hidden;
	}
	
	#listOfPlants {
		/*flex-basis: 50%;*/
		width: 50%;
		flex: auto;
		overflow-y: auto;
		border-right: 1px solid #ccc;
		padding: 5px;
		margin: 0px;
	}
	
	#resizeHandle {
		cursor: ew-resize;
		width: 10px;
		background-color: #ddd;
		height: 100%;
  }
	
	#viewerRegion {
		/*flex-basis: 50%;*/
		width: 50%;
		flex: auto;
    overflow: hidden;
    padding: 5px;
		position: relative;
	}
	
	.Fullscreen#viewerRegion,
	.Fullscreen#pdfViewer {
		position: absolute;
		top: 0px;
		left: 0px;
		width: 100%;
    height: 100%;
		background-color: #525659;
    display: block;
	}
	
	#f11 {
		position: absolute;
		bottom: 5px;
		left: calc(50% - 50px);
    width: 100px;
    height: 40px;
	}
	
	#f11:after {
		content: "Fullscreen"
	}
	
	.Fullscreen#f11 {
		top: 65px;
	}
	
	.Fullscreen#f11:after {
		content: "Exit view";
	}
	
	li {
		list-style-type: none;
		height: 100px;
		border: 1px solid black;
		padding: 5px;
		margin-block: 2px;
	}
	
	li:first-child {
		text-align: center;
		height: 25px;
		line-height: 25px;
	}
	
	.PlantCard {
		display: flex;
		width: 100%;
		height: 100%;
		place-items: center;
    justify-content: space-between;
	}
	
	.PlantCard > span {
		padding: 5px;
	}
	
	.PlantCardName { 
		width: 40%;
		font-weight: bold;
		position: relative;
	}
	.PlantCardName span:last-child { color: darkslategrey; }
	/*.PlantCardName span:last-child:after { */
	/*.PlantCardName:after { 
		position: absolute;
		left: 98%;
    top: calc(50% - 15px/2);
		display: inline-block;
		content: "";
		background-size: contain;
		width: 15px;
    height: 15px;
    /*padding: 10px;*/
		cursor: pointer;
		background-image: url("data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='800px' height='800px' version='1.1' viewBox='-.5 0 48 48' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg transform='translate(-401 -860)'%3E%3Cg transform='translate(401 860)'%3E%3Cpath d='m9.8273 24c0-1.5243 0.25316-2.9856 0.705-4.3563l-7.9088-6.0395c-1.5414 3.1296-2.4098 6.656-2.4098 10.396 0 3.7365 0.86736 7.2608 2.4066 10.388l7.9045-6.0512c-0.44757-1.3643-0.69752-2.8203-0.69752-4.3371' fill='%23FBBC05'%3E%3C/path%3E%3Cpath d='m23.714 10.133c3.3114 0 6.3023 1.1733 8.6523 3.0933l6.8364-6.8267c-4.1659-3.6267-9.5068-5.8667-15.489-5.8667-9.2868 0-17.268 5.3109-21.09 13.071l7.9088 6.0395c1.8223-5.5317 7.0169-9.5104 13.181-9.5104' fill='%23EB4335'%3E%3C/path%3E%3Cpath d='m23.714 37.867c-6.1645 0-11.359-3.9787-13.181-9.5104l-7.9088 6.0384c3.822 7.7611 11.803 13.072 21.09 13.072 5.7319 0 11.204-2.0352 15.311-5.8485l-7.5072-5.8037c-2.1182 1.3344-4.7855 2.0523-7.8041 2.0523' fill='%2334A853'%3E%3C/path%3E%3Cpath d='m46.145 24c0-1.3867-0.21364-2.88-0.53409-4.2667h-21.898v9.0667h12.605c-0.63023 3.0912-2.3457 5.4677-4.8004 7.0144l7.5072 5.8037c4.3144-4.0043 7.1205-9.9691 7.1205-17.618' fill='%234285F4'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E%0A");
	}*/
	
	.PlantCardFamily { 
		width: 35%;
		text-decoration-line: underline;
    text-underline-offset: 4px;
		letter-spacing: -1px;
		text-align: -webkit-center;
	}
	
	.PlantCardType { 
		height: 70%;
    width: 25%;
		text-align: center;
    border-radius: 2.5%;
    text-transform: uppercase;
    font-weight: bold;
		letter-spacing: 1px;
	}
	.PlantCardType:before {
		display: inline-block;
    content: attr(data-type);
    padding-bottom: 5px;
	}
	.PlantCardType[data-type="aquatic"] { border: 2px solid #8ab4d2; background-color: #8ab4d2a0; }
	.PlantCardType[data-type="cactus"] { border: 2px solid #b9442e; background-color: #b9442ea0; }
	.PlantCardType[data-type="climber"] { border: 2px solid #98925c; background-color: #98925ca0; }
	.PlantCardType[data-type="herb"] { border: 2px solid #bea61d; background-color: #bea61da0; }
	.PlantCardType[data-type="palm"] { border: 2px solid #50655b; background-color: #50655ba0; }
	.PlantCardType[data-type="shrub"] { border: 2px solid #a16f46; background-color: #a16f46a0; }
	.PlantCardType[data-type="tree"] { border: 2px solid #704524; background-color: #704524a0; }
	.PlantCardType span {
		width: 50%;
    display: inline-block;
	}
	.PlantCardType span[data-type]:after {
		display: inline-block;
		content: "";
		background-size: contain;
		width: 25px;
    height: 25px;
    padding: 10px;
		cursor: pointer;
	}
	.PlantCardType span[data-type="pdf"]:after {
		background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='800px' height='800px' viewBox='0 0 15 15' fill='none'%3E%3Cpath d='M2.5 6.5V6H2V6.5H2.5ZM6.5 6.5V6H6V6.5H6.5ZM6.5 10.5H6V11H6.5V10.5ZM13.5 3.5H14V3.29289L13.8536 3.14645L13.5 3.5ZM10.5 0.5L10.8536 0.146447L10.7071 0H10.5V0.5ZM2.5 7H3.5V6H2.5V7ZM3 11V8.5H2V11H3ZM3 8.5V6.5H2V8.5H3ZM3.5 8H2.5V9H3.5V8ZM4 7.5C4 7.77614 3.77614 8 3.5 8V9C4.32843 9 5 8.32843 5 7.5H4ZM3.5 7C3.77614 7 4 7.22386 4 7.5H5C5 6.67157 4.32843 6 3.5 6V7ZM6 6.5V10.5H7V6.5H6ZM6.5 11H7.5V10H6.5V11ZM9 9.5V7.5H8V9.5H9ZM7.5 6H6.5V7H7.5V6ZM9 7.5C9 6.67157 8.32843 6 7.5 6V7C7.77614 7 8 7.22386 8 7.5H9ZM7.5 11C8.32843 11 9 10.3284 9 9.5H8C8 9.77614 7.77614 10 7.5 10V11ZM10 6V11H11V6H10ZM10.5 7H13V6H10.5V7ZM10.5 9H12V8H10.5V9ZM2 5V1.5H1V5H2ZM13 3.5V5H14V3.5H13ZM2.5 1H10.5V0H2.5V1ZM10.1464 0.853553L13.1464 3.85355L13.8536 3.14645L10.8536 0.146447L10.1464 0.853553ZM2 1.5C2 1.22386 2.22386 1 2.5 1V0C1.67157 0 1 0.671573 1 1.5H2ZM1 12V13.5H2V12H1ZM2.5 15H12.5V14H2.5V15ZM14 13.5V12H13V13.5H14ZM12.5 15C13.3284 15 14 14.3284 14 13.5H13C13 13.7761 12.7761 14 12.5 14V15ZM1 13.5C1 14.3284 1.67157 15 2.5 15V14C2.22386 14 2 13.7761 2 13.5H1Z' fill='%23000000'/%3E%3C/svg%3E");
	}
	.PlantCardType span[data-type="png"]:after {
		background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='800px' height='800px' viewBox='0 0 15 15' fill='none'%3E%3Cpath d='M2.5 6.5V6H2V6.5H2.5ZM10.5 10.5H10V11H10.5V10.5ZM12.5 10.5V11H13V10.5H12.5ZM13.5 3.5H14V3.29289L13.8536 3.14645L13.5 3.5ZM10.5 0.5L10.8536 0.146447L10.7071 0H10.5V0.5ZM6.5 6.5L6.94721 6.27639L6 6.5H6.5ZM6 10.5V11H7V10.5H6ZM8.5 10.5L8.05279 10.7236C8.15649 10.931 8.38919 11.0399 8.61488 10.9866C8.84056 10.9333 9 10.7319 9 10.5H8.5ZM9 6.5V6H8V6.5H9ZM2.5 7H3.5V6H2.5V7ZM3 11V8.5H2V11H3ZM3 8.5V6.5H2V8.5H3ZM3.5 8H2.5V9H3.5V8ZM4 7.5C4 7.77614 3.77614 8 3.5 8V9C4.32843 9 5 8.32843 5 7.5H4ZM3.5 7C3.77614 7 4 7.22386 4 7.5H5C5 6.67157 4.32843 6 3.5 6V7ZM10 6V10.5H11V6H10ZM10.5 11H12.5V10H10.5V11ZM13 10.5V8.5H12V10.5H13ZM10.5 7H13V6H10.5V7ZM2 5V1.5H1V5H2ZM13 3.5V5H14V3.5H13ZM2.5 1H10.5V0H2.5V1ZM10.1464 0.853553L13.1464 3.85355L13.8536 3.14645L10.8536 0.146447L10.1464 0.853553ZM2 1.5C2 1.22386 2.22386 1 2.5 1V0C1.67157 0 1 0.671573 1 1.5H2ZM1 12V13.5H2V12H1ZM2.5 15H12.5V14H2.5V15ZM14 13.5V12H13V13.5H14ZM12.5 15C13.3284 15 14 14.3284 14 13.5H13C13 13.7761 12.7761 14 12.5 14V15ZM1 13.5C1 14.3284 1.67157 15 2.5 15V14C2.22386 14 2 13.7761 2 13.5H1ZM6 6.5V10.5H7V6.5H6ZM6.05279 6.72361L8.05279 10.7236L8.94721 10.2764L6.94721 6.27639L6.05279 6.72361ZM8 6.5V10.5H9V6.5H8Z' fill='%23000000'/%3E%3C/svg%3E");
	}
	
	
	@media only screen and (max-width: 920px) and (orientation: portrait) {
		body { width: 97vw; }
		
		#content {
			height: 100vh;
			width: 100%;
			overflow: auto;
			display: flex;
			flex-direction: column;
		}
		
		#listOfPlants {
			width: 100%;
			height: 50%;
		}
		
		#resizeHandle {
			display: none;
		}
		
		#viewerRegion {
			width: 100%;
			height: 50%;
			display: contents;
		}
	}
	</style>
</head>
<body>
	<section id="searchBar">
		<div id="search">
			<input type="search" style="flex: 1; line-height: 25px; padding-inline-start: 5px;" placeholder="Search plants by science name, common names, family and type.">
			<button type="button">Search [ENTER]</button>
		</div>
		<span id="toggle" class="OFF"></span>
		<div id="filters" class="Hide">
			<section>
				<label for="ff">Filter by plant family:</label>
				<br>
				<select id="filterFamily" name="ff"></select>
			</section>
			<section>
				<label for="tf">Filter by plant types:</label> <!-- https://www.w3schools.com/howto/howto_css_custom_checkbox.asp -->
				<br>
				<div id="filterType" name="tf"></div>
			</section>
		</div>
	</section>
	
	<section id="content">
		<ul id="listOfPlants"></ul>
		<div id="resizeHandle"></div>
		<div id="viewerRegion">
			<iframe id="pdfViewer" style="width: 100%; height: 100%;" frameborder="0"></iframe> <!-- Shwo content over entire height. Internal scroll. Fullscreen mode needed. -->
			<button id="f11" type="fullscreen"></button>
		</div>
	</section>
	
	<script>
		const search 			 = document.querySelector('input[type="search"]')
		const searchButton = document.querySelector('button[type="button"]')
		const filterToggle = document.querySelector("#toggle")
		const filtersDiv 	 = document.querySelector("#filters")
		const filterFamily = document.querySelector("#filterFamily")
		const filterType 	 = document.querySelector("#filterType")
		const content 		 = document.querySelector('#content')
		const listOfPlants = document.querySelector("#listOfPlants")
		const viewerRegion = document.querySelector("#viewerRegion")
		const pdfViewer 	 = document.querySelector("#pdfViewer")
		const f11 = document.querySelector("#f11")
    const resizeHandle = document.querySelector('#resizeHandle')
		
		const dbPath 					 = "./assets/book parts/Plants by family/PlantsData.json"
		const baseFolderPlants = "./assets/book parts/Plants by family/"
		//const pdfPart1 				 = "./assets/book parts/Authors preface-fwv.pdf"
		//const pdfPart2 				 = "./assets/book parts/Introduction-fwv.pdf"
		//const pdfPart3 				 = "./assets/book parts/Planning checklists for quick reference-fwv.pdf"
		const book 						 = "./assets/book parts/Rest of the book.pdf"
		
		let matchingPlants = {}
		let plantsDataBase = {}
		let filterFamilyOptions = []
		let filterTypeOptions = []
    let isResizing = false
		let activeFilters = {}
		
		function loadJSON(jsonPath) {
			fetch(jsonPath)
				.then(response => response.json())
				.then(data => {
					plantsDataBase = data
					displayResults(Object.values(plantsDataBase))
					populateFilters()

				})
				.catch(error => console.error('Error loading JSON:', error))
		}
		
		function loadToView(filePath) {
			pdfViewer.src = filePath
		}
		
		/*function downloadPNG(plantName) {
			if (pdfViewer.src.length > 0 && 
				 (!pdfPart1.includes(pdfViewer.src) && 
					!pdfPart2.includes(pdfViewer.src) && 
					!pdfPart3.includes(pdfViewer.src))) {
				const link = document.createElement("a")
				link.setAttribute("href", pdfViewer.src)
				link.setAttribute("download", pdfViewer.src)
				link.click()
			}
		}*/
		
		function searchTheDB() {
			const query = search.value.toLowerCase()
			const res = Object.values(plantsDataBase).filter(item =>
				item.plantName.toLowerCase().includes(query) ||
				item.plantFamily.toLowerCase().includes(query) ||
				item.knownByTheNames.some(name => name.toLowerCase().includes(query)) ||
				item.plantType.toLowerCase().includes(query)
			)
			matchingPlants = res
			displayResults(applyFilters())
		}

		function displayResults(results) {
			listOfPlants.innerHTML = ''
			filterFamilyOptions = []
			filterTypeOptions = []
			
			const header = document.createElement('li')
			header.textContent = `${results.length} plants found`
			listOfPlants.appendChild(header)

			results.forEach(plant => {
			// create li PlantCard
				const listItem = document.createElement('li')
				const liCard = document.createElement("div")
				liCard.setAttribute("class", "PlantCard")
				
				const spanName = document.createElement('span')
				spanName.setAttribute("class", "PlantCardName")
				const commonNames = plant.knownByTheNames.map(plant => plant.replace(/ /g, "&nbsp;"))
				spanName.innerHTML = `<span>${commonNames.join(", ")}</span><br><br><span>${plant.plantName.replace(/ /g, "&nbsp;")}</span>`
				//spanName.innerHTML = `<span>${plant.knownByTheNames.join(",<wbr>")}</span><br><br><span>${plant.plantName}</span>`
				
				const spanFamily = document.createElement('span')
				spanFamily.setAttribute("class", "PlantCardFamily")
				spanFamily.textContent = plant.plantFamily
				
				const spanType = document.createElement('span')
				spanType.setAttribute("class", "PlantCardType")
				spanType.setAttribute("data-type", plant.plantType)
				//spanType.textContent = plant.plantType
				
				name = plant.plantName.replace(/ /g, "%20")
				pdfClick = `checkDetails('${plant.plantFamily}/${name}-fwv.pdf')`
				pdfFile = `<span onclick=${pdfClick} data-type=pdf></span>`
				pngClick = `checkDetails('${plant.plantFamily}/${name}.png')`
				pngFile = `<span onclick=${pngClick} data-type=png></span>`
				spanType.innerHTML = `<br>${pdfFile}${pngFile}`
				
				liCard.appendChild(spanName)
				liCard.appendChild(spanFamily)
				liCard.appendChild(spanType)
				
				listItem.appendChild(liCard)
				listOfPlants.appendChild(listItem)
			//get options for filters
				!filterFamilyOptions.includes(plant.plantFamily) ? filterFamilyOptions.push(plant.plantFamily) : null
				!filterTypeOptions.includes(plant.plantType) ? filterTypeOptions.push(plant.plantType) : null
			})
		}
		
		function populateFilters() {
		//Family -- <option value="plant">Plant</option>
			filterFamily.innerHTML = ""
			const opt = document.createElement('option')
			opt.setAttribute("value", "")
			opt.textContent = "ALL"
			filterFamily.appendChild(opt)
			filterFamilyOptions.forEach(ff => {
				const opt = document.createElement('option')
				opt.setAttribute("value", ff)
				opt.textContent = ff
				
				filterFamily.appendChild(opt)
			})
		//Type -- <label class="Checkbox">One
		//					<input type="checkbox" checked="checked">
		//					<span class="Checkmark"></span>
		//				</label>
			filterType.innerHTML = ""
			filterTypeOptions.forEach(ft => {
				const opt = document.createElement('label')
				opt.setAttribute("class", "Checkbox")
				opt.textContent = ft
				
				const tfin = document.createElement('input')
				tfin.setAttribute("type", "checkbox")
				//tfin.setAttribute("checked", "checked")
				
				const tfmarker = document.createElement('span')
				tfmarker.setAttribute("class", "Checkmark")
				
				opt.appendChild(tfin)
				opt.appendChild(tfmarker)
				
				filterType.appendChild(opt)
			})
		}
		
		function applyFilters() {
			//return matches = Object.values(matchingPlants.length > 0 ? matchingPlants : plantsDataBase).filter(item =>
			return matches = Object.values(matchingPlants).filter(item =>
				item.plantFamily.includes(activeFilters["Family"] ? activeFilters["Family"] : "") && 
				(activeFilters["Type"] ? activeFilters["Type"] : [""]).every(type => item.plantType.includes(type))
			)
		}
		
		function checkDetails(plantFileName) {
			loadToView(baseFolderPlants + plantFileName)
		}
		
    /*function handleMouseMove(e) {
      if (isResizing) {
        const containerRect = content.getBoundingClientRect()
        const newWidth = e.pageX/containerRect.width //e.clientX/containerRect.width //(e.clientX - containerRect.left) / containerRect.width
        listOfPlants.style.width = `${newWidth*100}%` //flexBasis
        viewerRegion.style.width = `${100 - newWidth*100}%` //`${(1-newWidth)*100}%`
      }
    }*/
		
		/*function dragF11(e) {
			if (f11.classList.contains("Fullscreen")) {
				f11.style.top = `${e.pageY - 5}px`
				f11.style.left = `${e.pageX - 5}px`
			}
		}*/

		
		//listeners
		search.addEventListener("keypress", (e) => {
			if (e.key === "Enter") {
				e.preventDefault()
				searchTheDB()
			}
		})
		
		searchButton.addEventListener("click", (e) => {
			searchTheDB()
		})
		
		search.addEventListener("search", (e) => {
			searchTheDB()
		})
		
		filterToggle.addEventListener("click", (e) => {
			filterToggle.classList.toggle("ON")
			filterToggle.classList.toggle("OFF")
			filtersDiv.classList.toggle("Hide")
			//filtersDiv.classList.toggle("Show")
		})
		
		f11.addEventListener("click", (e) => {
			viewerRegion.classList.toggle("Fullscreen")
			pdfViewer.classList.toggle("Fullscreen")
			f11.classList.toggle("Fullscreen")
		})
		
		/*f11.addEventListener("mousedown", () =>
			document.addEventListener("mousemove", dragF11)
		);
		f11.addEventListener("mouseup", () => {
			document.removeEventListener("mousemove", dragF11)
			if (f11.classList.contains("Fullscreen")) {
				f11.style.bottom = "5px"
				f11.style.left = "calc(50% - 50px)"
			}
		});*/
		
		
		/*resizeHandle.addEventListener('mousedown', (e) => {
			isResizing = true
			
			document.addEventListener('mousemove', handleMouseMove)
			document.addEventListener('mouseup', () => {
				isResizing = false
				document.removeEventListener('mousemove', handleMouseMove)
      })
    })*/
		
		filterFamily.addEventListener("change", (e) => {
			activeFilters["Family"] = e.target.value
			searchTheDB()
		})
		
		filterType.addEventListener("change", (e) => {
			const inputs = filterType.querySelectorAll('label')
			activeFilters["Type"] = []
			inputs.forEach(ch => {
				if (ch.children[0].checked) {
					activeFilters["Type"].push(ch.textContent)
				}
			})
			searchTheDB()
		})
		
		//main
		loadToView(book)
		loadJSON(dbPath)
	</script>
</body>
</html>